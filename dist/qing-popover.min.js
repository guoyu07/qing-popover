/* qing-popover v0.0.1 | (c) Mycolorway Design | MIT License */
!function(t,o){"object"==typeof module&&module.exports?module.exports=o(require("jquery"),require("qing-module")):t.QingPopover=o(t.jQuery,t.QingModule)}(this,function(t,o){var i=require=function t(o,i,e){function r(s,p){if(!i[s]){if(!o[s]){var h="function"==typeof require&&require;if(!p&&h)return h(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var a=i[s]={exports:{}};o[s][0].call(a.exports,function(t){var i=o[s][1][t];return r(i?i:t)},a,a.exports,t,o,i,e)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(i,e,r){var n,s=function(t,o){function i(){this.constructor=t}for(var e in o)p.call(o,e)&&(t[e]=o[e]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},p={}.hasOwnProperty,h=[].indexOf||function(t){for(var o=0,i=this.length;o<i;o++)if(o in this&&this[o]===t)return o;return-1};n=function(o){function i(o){i.__super__.constructor.apply(this,arguments),this.opts=t.extend({},i.opts,this.opts),this.pointTo=this.opts.pointTo,this._render(),this._bind(),this.refresh()}return s(i,o),i.opts={pointTo:null,cls:null,content:null,position:null,offset:null,autohide:!0,align:"center",verticalAlign:"middle",autoAdjustPosition:!0},i.arrowOffset=16,i._directions=["direction-left-top","direction-left-middle","direction-left-bottom","direction-right-top","direction-right-bottom","direction-right-middle","direction-top-left","direction-top-right","direction-top-center","direction-bottom-left","direction-bottom-right","direction-bottom-center"],i._tpl='<div class="qing-popover">\n  <div class="qing-popover-content"></div>\n  <div class="qing-popover-arrow">\n    <i class="arrow arrow-shadow-1"></i>\n    <i class="arrow arrow-shadow-0"></i>\n    <i class="arrow arrow-border"></i>\n    <i class="arrow arrow-basic"></i>\n  </div>\n</div>',i.prototype._render=function(){return this.el=t(i._tpl).addClass(this.opts.cls),this.arrow=this.el.find(".qing-popover-arrow"),this.content=this.el.find(".simple-popover-content"),this.content.append(this.opts.content),this.el.appendTo("body")},i.prototype._bind=function(){if(this.opts.autohide)return t(document).on("mousedown.qing-popover",function(o){return function(i){var e;if(e=t(i.target),!(e.is(o.pointTo)||o.el.has(e).length||e.is(o.el)))return o.trigger("autohide")}}(this))},i.prototype.refresh=function(){var t;if(this.el.removeClass(i._directions.join(" ")),this.arrow.css({top:"",bottom:"",left:"",right:""}),this.directions=this._directions(),t="direction-"+this.directions.join("-"),h.call(i._directions,t)<0)throw new Error("[QingPopover] - position is not valid");return this.position=this._position(),this.el.addClass(t).css(this.position)},i.prototype._directions=function(){var o,e,r,n,s,p,h,c,a,f,u,d,l,v,w,g;return this.opts.position?this.opts.position.split("-"):(c=this.pointTo.offset(),a=this.pointTo.outerWidth(),h=this.pointTo.outerHeight(),f=this.el.outerWidth(),r=this.arrow.width(),o=this.arrow.height(),e=i.arrowOffset,w=t(window).height(),g=t(window).width(),l=t(document).scrollTop(),d=t(document).scrollLeft(),p=c.left-d,u=d+g-c.left-a,v=c.top-l,n=l+w-c.top-h,s=["right","bottom"],u<f+e&&p>u&&p>f+e&&(direction[0]="left"),v>n&&(direction[1]="top"),s)},i.prototype._position=function(){var t,o,e,r,n,s,p,h,c,a;switch(a=0,r=0,s=this.pointTo.offset(),p=this.pointTo.outerWidth(),n=this.pointTo.outerHeight(),c=this.el.outerWidth(),h=this.el.outerHeight(),e=this.arrow.width(),t=this.arrow.height(),o=i.arrowOffset,this.directions[0]){case"left":r=s.left-t-c;break;case"right":r=s.left+p+t;break;case"top":a=s.top-t-h;break;case"bottom":a=s.top+n+t}switch(this.directions[1]){case"top":a=s.top+n/2+e/2+o-h;break;case"bottom":a=s.top+n/2-e/2-o;break;case"left":r=s.left+p/2+e/2+o-c;break;case"right":r=s.left+p/2-e/2-o;break;case"center":r=s.left+p/2-c/2;break;case"middle":a=s.top+n/2-h/2}if(/top|bottom/.test(this.directions[0]))switch(this.opts.align){case"left":r-=p/2;break;case"right":r+=p/2}if(/left|right/.test(this.directions[0]))switch(this.opts.verticalAlign){case"top":a-=n/2;break;case"bottom":a+=n/2}return this._autoAdjustPosition(this._adjustOffset({top:a,left:r}))},i.prototype._autoAdjustPosition=function(o){var e,r,n,s,p,h;if(!this.opts.autoAdjustPosition)return o;if(n=o.left,h=o.top,p=t(document).scrollTop(),s=t(document).scrollLeft(),e=i.arrowOffset,/top|bottom/.test(this.directions[0])&&n<s)switch(r=s-n,n+=r,this.directions[1]){case"left":this.arrow.css("right",e+r);break;case"right":this.arrow.css("left",Math.max(e-r,e));break;default:this.arrow.css("marginLeft",-e/2-r)}if(/left|right/.test(this.directions[0])&&h<p)switch(r=p-h,h+=r,this.directions[1]){case"top":this.arrow.css("bottom",e+r);break;case"bottom":this.arrow.css("top",Math.max(e-r,e));break;default:this.arrow.css("marginTop",-e/2-r)}return{top:h,left:n}},i.prototype._adjustOffset=function(t){var o,i;return this.opts.offset?(i=this.opts.offset.y,o=this.opts.offset.x,i&&("top"===this.directions[0]&&(i=-i),t.top+=i),o&&("left"===this.directions[0]&&(o=-o),t.left+=o),t):t},i.prototype.destroy=function(){return t(document).off(".qing-popover"),this.el.remove()},i}(o),e.exports=n},{}],"qing-popover":[function(i,e,r){var n,s,p=function(t,o){function i(){this.constructor=t}for(var e in o)h.call(o,e)&&(t[e]=o[e]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},h={}.hasOwnProperty;n=i("./views/popover.coffee"),s=function(o){function i(o){if(i.__super__.constructor.apply(this,arguments),this.el=t(this.opts.el),!(this.el.length>0))throw new Error("QingPopover: option el is required");this.opts=t.extend({},i.opts,this.opts),i.destroyAll(),this._render(),this._initChildComponents(),this._bind(),this.trigger("ready")}return p(i,o),i.opts={el:null,popover:{}},i.prototype._render=function(){return this.el.addClass("qing-popover-point-to").data("qingPopover",this)},i.prototype._initChildComponents=function(){return this.popover=new n(t.extend({pointTo:this.el},this.opts.popover))},i.prototype._bind=function(){return t(window).on("resize.qing-popover",function(t){return function(){return t.popover.refresh()}}(this)),this.popover.on("autohide",function(t){return function(){return t.destroy()}}(this))},i.prototype.destroy=function(){return t(window).off(".qing-popover"),this.el.off(".qing-popover"),this.popover.destroy(),this.el.removeClass("qing-popover-point-to").removeData("qingPopover")},i.destroyAll=function(){return t(".qing-popover").each(function(){var o,i;return o=t(this),i=o.data("qingPopover"),i.el.index()===-1?o.remove():i.destroy()})},i}(o),e.exports=s},{"./views/popover.coffee":1}]},{},[]);return i("qing-popover")});